<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>Grapesjs Tailwind</title>
  <link href="https://unpkg.com/grapesjs/dist/css/grapes.min.css" rel="stylesheet">
  <script src="https://unpkg.com/grapesjs"></script>
  <script src="https://unpkg.com/grapesjs-plugin-forms"></script>
  <script src="https://unpkg.com/grapesjs-touch"></script>
  <style>
    body,
    html {
      height: 100%;
      margin: 0;
    }

    /* .gjs-block {
            padding: 0 !important;
            width: 100% !important;
            min-height: auto !important;
        } */

    .gjs-block svg {
      width: 100%;
    }

    .change-theme-button {
      width: 80px;
      height: 80px;
      border-radius: 10%;
      margin: 5px;
      background-color: black;
      color: white;
      font-family: sans-serif;
      border: rgb(85, 85, 85);
      border-style: solid;
      cursor: pointer;
    }

    .change-theme-button:hover {
      opacity: 50%;
    }

    .change-theme-button:focus {
      /* background-color: yellow; */
      outline: none;
      box-shadow: 0 0 0 0pt #e4e3e375;
    }



    .pointer-element {
      padding: 20px;
      background-color: lightblue;
      border-radius: 10px;
      cursor: pointer;
      transition: box-shadow 0.3s ease;
    }

    .pointer-element:hover {
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
    }



    #gjs {
      border: 10px solid #444;
    }
  </style>
</head>

<body class="">

  <div id="gjs" style="height:0px; overflow:hidden" class="dark:bg-background-900 bg-background"></div>


  <script type="text/javascript">
    const escapeName = (name) => `${name}`.trim().replace(/([^a-z0-9\w-:/]+)/gi, '-');

    window.editor = grapesjs.init({
      height: '100%',
      container: '#gjs',
      showOffsets: true,
      fromElement: true,
      noticeOnUnload: false,
      storageManager: false,
      selectorManager: { escapeName },
      allowScripts: 1,
      plugins: ['grapesjs-tailwind-frederick', 'grapesjs-touch'],
      pluginsOpts: {
        'grapesjs-tailwind-frederick': { 
          config: {
    "theme": {
      "extend": {
        "colors": {
          "primary": {
            "50": "#ecfdf5",
            "100": "#d1fae5",
            "200": "#a7f3d0",
            "300": "#6ee7b7",
            "400": "#34d399",
            "500": "#10b981",
            "600": "#059669",
            "700": "#047857",
            "800": "#065f46",
            "900": "#064e3b",
            "950": "#022c22",
            "DEFAULT": "#10b981",
            "foreground": {
              "50": "#111827",
              "100": "#1f2937",
              "200": "#374151",
              "300": "#4b5563",
              "400": "#6b7280",
              "500": "#9ca3af",
              "600": "#d1d5db",
              "700": "#e5e7eb",
              "800": "#f3f4f6",
              "900": "#f9fafb",
              "DEFAULT": "white"
            }
          },
          "secondary": {
            "50": "#111827",
            "100": "#1f2937",
            "200": "#374151",
            "300": "#4b5563",
            "400": "#6b7280",
            "500": "#9ca3af",
            "600": "#d1d5db",
            "700": "#e5e7eb",
            "800": "#f3f4f6",
            "900": "#f9fafb",
            "DEFAULT": "white",
            "foreground": {
              "50": "#f9fafb",
              "100": "#f3f4f6",
              "200": "#e5e7eb",
              "300": "#d1d5db",
              "400": "#9ca3af",
              "500": "#6b7280",
              "600": "#4b5563",
              "700": "#374151",
              "800": "#1f2937",
              "900": "#111827",
              "950": "#030712",
              "DEFAULT": "black"
            }
          },
          "background": {
            "50": "#f8fafc",
            "100": "#f1f5f9",
            "200": "#e2e8f0",
            "300": "#cbd5e1",
            "400": "#94a3b8",
            "500": "#64748b",
            "600": "#475569",
            "700": "#334155",
            "800": "#1e293b",
            "900": "#0f172a",
            "950": "#020617",
            "DEFAULT": "#020617"
          },
          "foreground": {
            "50": "#111827",
            "100": "#1f2937",
            "200": "#374151",
            "300": "#4b5563",
            "400": "#6b7280",
            "500": "#9ca3af",
            "600": "#d1d5db",
            "700": "#e5e7eb",
            "800": "#f3f4f6",
            "900": "#f9fafb",
            "DEFAULT": "white"
          }
        },
        "spacing": {
          "128": "32rem",
          "144": "36rem"
        },
        "borderRadius": {
          "4xl": "2rem"
        }
      },
      "screens": {
        "lg": "976px",
        "md": "768px",
        "sm": "480px",
        "xl": "1440px"
      },
      "fontFamily": {
        "sans": [
          "Graphik",
          "sans-serif"
        ],
        "serif": [
          "Merriweather",
          "serif"
        ]
      }
    },
    "darkMode": [
      "selector",
      "[data-mode=\"dark\"]"
    ]
  }
         },
        'grapesjs-touch': {},
      },
      canvasCss: `
                  .gjs-selected {
                    outline: 3px solid #d8b4fe !important;
                  }
                  .gjs-panel { display: none; }
            `,
    });
    

    // <img src="https://play.tailwindcss.com/img/grid.svg" alt="background" class="absolute z-0 top-1/2 left-1/2 max-w-none -translate-x-1/2 -translate-y-1/2" width="1308" />


    const component = `<section class="text-foreground-200 body-font">
  <div class="container mx-auto flex flex-col px-5 py-24 justify-center items-center">
    <!-- Replace the src with the relevant image URL -->
    <img class="lg:w-2/6 md:w-3/6 w-5/6 mb-10 object-cover object-center rounded" alt="hero" src="https://dummyimage.com/720x600">
    <div class="w-full md:w-2/3 flex flex-col mb-16 items-center text-center">
      <!-- Replace HERO TITLE with a title that describes your business in one sentence -->
      <h1 class="text-3xl font-bold tracking-tighter sm:text-4xl xl:text-6xl/none bg-clip-text text-transparent bg-gradient-to-tr from-foreground-900 to-primary-700">A hero title that describes the business in one sentence.</h1>
      <!-- Replace SUBHERO DESCRIPTION with a detailed description of what the business is about -->
      <p class="mb-8 leading-relaxed text-foreground-600">A subhero title that describes a bit more about the business.</p>
      <form data-gjs-type="form" style="margin: 0;">
      <div class="flex md:flex-nowrap flex-wrap justify-center items-end md:justify-start">
        <div class="relative sm:w-64 w-40 sm:mr-4 mr-2 ">
          <input class="pl-10 flex h-9 w-full rounded-md border border-foreground-300 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50" id="email" name="email" placeholder="email@example.com" type="email" required>
              <div class="absolute inset-y-0 left-0 text-foreground-400/70 dark:text-foreground-400/70 pl-4 flex items-center pointer-events-none">
                  <svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="16" height="14">
                      <path d="M14 0H2a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm0 12H2V5.723l5.504 3.145a.998.998 0 0 0 .992 0L14 5.723V12Zm0-8.58L8 6.849 2 3.42V2h12v1.42Z" />
                  </svg>                                                      
              </div>
          </div>
          <button type="submit" class="cursor-pointer inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground shadow hover:bg-primary/90 h-9 px-4 py-2 ">Subscribe</button>
      </div>
      <p class="text-foreground-500 text-sm mt-2 md:text-left text-center mb-8">Subscribe to our newsletter.</p>
      </form>
      <div class="flex">
        <!-- Replace BUTTON with appropriate text for the Google Play call to action -->
        <button class="bg-background-100 inline-flex py-3 px-5 rounded-lg items-center hover:bg-background-200 focus:outline-none">
          <svg fill="currentColor" class="w-8 h-8 sm:w-6 sm:h-6" viewBox="0 0 512 512">
            <path d="M99.617 8.057a50.191 50.191 0 00-38.815-6.713l230.932 230.933 74.846-74.846L99.617 8.057zM32.139 20.116c-6.441 8.563-10.148 19.077-10.148 30.199v411.358c0 11.123 3.708 21.636 10.148 30.199l235.877-235.877L32.139 20.116zM464.261 212.087l-67.266-37.637-81.544 81.544 81.548 81.548 67.273-37.64c16.117-9.03 25.738-25.442 25.738-43.908s-9.621-34.877-25.749-43.907zM291.733 279.711L60.815 510.629c3.786.891 7.639 1.371 11.492 1.371a50.275 50.275 0 0027.31-8.07l266.965-149.372-74.849-74.847z"></path>
          </svg>
          <span class="ml-4 flex items-start flex-col leading-none">
            <span class="text-xs text-foreground-200 mb-1">GET IT ON</span>
            <span class="title-font font-medium">Google Play</span>
          </span>
        </button>
        <!-- Replace BUTTON with appropriate text for the App Store call to action -->
        <button class="bg-background-100 inline-flex py-3 px-5 rounded-lg items-center ml-4 hover:bg-background-200 focus:outline-none">
          <svg fill="currentColor" class="w-8 h-8 sm:w-6 sm:h-6" viewBox="0 0 305 305">
            <path d="M40.74 112.12c-25.79 44.74-9.4 112.65 19.12 153.82C74.09 286.52 88.5 305 108.24 305c.37 0 .74 0 1.13-.02 9.27-.37 15.97-3.23 22.45-5.99 7.27-3.1 14.8-6.3 26.6-6.3 11.22 0 18.39 3.1 25.31 6.1 6.83 2.95 13.87 6 24.26 5.81 22.23-.41 35.88-20.35 47.92-37.94a168.18 168.18 0 0021-43l.09-.28a2.5 2.5 0 00-1.33-3.06l-.18-.08c-3.92-1.6-38.26-16.84-38.62-58.36-.34-33.74 25.76-51.6 31-54.84l.24-.15a2.5 2.5 0 00.7-3.51c-18-26.37-45.62-30.34-56.73-30.82a50.04 50.04 0 00-4.95-.24c-13.06 0-25.56 4.93-35.61 8.9-6.94 2.73-12.93 5.09-17.06 5.09-4.64 0-10.67-2.4-17.65-5.16-9.33-3.7-19.9-7.9-31.1-7.9l-.79.01c-26.03.38-50.62 15.27-64.18 38.86z"></path>
            <path d="M212.1 0c-15.76.64-34.67 10.35-45.97 23.58-9.6 11.13-19 29.68-16.52 48.38a2.5 2.5 0 002.29 2.17c1.06.08 2.15.12 3.23.12 15.41 0 32.04-8.52 43.4-22.25 11.94-14.5 17.99-33.1 16.16-49.77A2.52 2.52 0 00212.1 0z"></path>
          </svg>
          <span class="ml-4 flex items-start flex-col leading-none">
            <span class="text-xs text-foreground-200 mb-1">Download on the</span>
            <span class="title-font font-medium">App Store</span>
          </span>
        </button>
      </div>
    </div>
  </div>
</section>
    `
    const test = `<div id="test">${component}</div>`
    function stringToHtml(htmlString) {
      const parser = new DOMParser();
      const doc = parser.parseFromString(htmlString, 'text/html');
      return doc.body.firstChild;
    }

    function getTextNodes(element) {
      const textNodes = [];
      const clone = element.cloneNode(true);
      const walker = document.createTreeWalker(
        clone,
        NodeFilter.SHOW_TEXT, // Show only text nodes
        null,
        false
      );
      let node;
      const nodesToReplace = [];
      while (node = walker.nextNode()) {
        if (node.textContent.trim() !== '') {
          const wrapper = document.createElement('div');
          const htmlToAdd = `
                        <div role="status" class="animate-pulse w-full ">
                            <div class="h-3 bg-background-400 rounded-full dark:bg-background-600 w-full mb-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>
                        </div>
                    `;
          wrapper.innerHTML = htmlToAdd;
          nodesToReplace.push({ node, replacement: stringToHtml(htmlToAdd) });
        }
      }

      // Perform replacements after traversing all text nodes
      nodesToReplace.forEach(({ node, replacement }) => {
        node.parentNode.replaceChild(replacement, node);
      });
      const htmlString = clone.outerHTML;
      return htmlString;
    }

    editor.addComponents(test);
    let genComponent = getTextNodes(stringToHtml(test));
    // console.log("new component:", genComponent);


    setTimeout(() => {
      // const component = editor.DomComponents.getById("test");
      // component?.replaceWith(genComponent);
    }, 1000)

    editor.Panels.addButton('options', {
      id: 'update-theme',
      className: 'fa fa-adjust',
      command: 'open-update-theme',
      attributes: {
        title: 'New Page',
        'data-tooltip-pos': 'bottom',
      },
    });

    editor.Panels.addButton('options', {
      id: 'update-theme-2',
      className: 'fa fa-adjust',
      command: 'run-theme',
      attributes: {
        title: 'New Theme',
        'data-tooltip-pos': 'bottom',
      },
    });
  </script>
</body>

</html>