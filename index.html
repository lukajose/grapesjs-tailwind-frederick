<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>Grapesjs Tailwind</title>
  <link href="https://unpkg.com/grapesjs/dist/css/grapes.min.css" rel="stylesheet">
  <script src="https://unpkg.com/grapesjs"></script>
  <script src="https://unpkg.com/grapesjs-plugin-forms"></script>
  <script src="https://unpkg.com/grapesjs-touch"></script>
  <style>
    body,
    html {
      height: 100%;
      margin: 0;
    }

    /* .gjs-block {
            padding: 0 !important;
            width: 100% !important;
            min-height: auto !important;
        } */

    .gjs-block svg {
      width: 100%;
    }

    .change-theme-button {
      width: 80px;
      height: 80px;
      border-radius: 10%;
      margin: 5px;
      background-color: black;
      color: white;
      font-family: sans-serif;
      border: rgb(85, 85, 85);
      border-style: solid;
      cursor: pointer;
    }

    .change-theme-button:hover {
      opacity: 50%;
    }

    .change-theme-button:focus {
      /* background-color: yellow; */
      outline: none;
      box-shadow: 0 0 0 0pt #e4e3e375;
    }



    .pointer-element {
      padding: 20px;
      background-color: lightblue;
      border-radius: 10px;
      cursor: pointer;
      transition: box-shadow 0.3s ease;
    }

    .pointer-element:hover {
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
    }



    #gjs {
      border: 10px solid #444;
    }
  </style>
</head>

<body class="">

  <div id="gjs" style="height:0px; overflow:hidden" class="dark:bg-background-900 bg-background"></div>


  <script type="text/javascript">
    const escapeName = (name) => `${name}`.trim().replace(/([^a-z0-9\w-:/]+)/gi, '-');

    window.editor = grapesjs.init({
      height: '100%',
      container: '#gjs',
      showOffsets: true,
      fromElement: true,
      noticeOnUnload: false,
      storageManager: false,
      selectorManager: { escapeName },
      allowScripts: 1,
      plugins: ['grapesjs-tailwind-frederick', 'grapesjs-touch'],
      pluginsOpts: {
        'grapesjs-tailwind-frederick': { 
          config: {
    "theme": {
      "extend": {
        "colors": {
          "primary": {
            "50": "#ecfdf5",
            "100": "#d1fae5",
            "200": "#a7f3d0",
            "300": "#6ee7b7",
            "400": "#34d399",
            "500": "#10b981",
            "600": "#059669",
            "700": "#047857",
            "800": "#065f46",
            "900": "#064e3b",
            "950": "#022c22",
            "DEFAULT": "#10b981",
            "foreground": {
              "50": "#111827",
              "100": "#1f2937",
              "200": "#374151",
              "300": "#4b5563",
              "400": "#6b7280",
              "500": "#9ca3af",
              "600": "#d1d5db",
              "700": "#e5e7eb",
              "800": "#f3f4f6",
              "900": "#f9fafb",
              "DEFAULT": "white"
            }
          },
          "secondary": {
            "50": "#111827",
            "100": "#1f2937",
            "200": "#374151",
            "300": "#4b5563",
            "400": "#6b7280",
            "500": "#9ca3af",
            "600": "#d1d5db",
            "700": "#e5e7eb",
            "800": "#f3f4f6",
            "900": "#f9fafb",
            "DEFAULT": "white",
            "foreground": {
              "50": "#f9fafb",
              "100": "#f3f4f6",
              "200": "#e5e7eb",
              "300": "#d1d5db",
              "400": "#9ca3af",
              "500": "#6b7280",
              "600": "#4b5563",
              "700": "#374151",
              "800": "#1f2937",
              "900": "#111827",
              "950": "#030712",
              "DEFAULT": "black"
            }
          },
          "background": {
            "50": "#f8fafc",
            "100": "#f1f5f9",
            "200": "#e2e8f0",
            "300": "#cbd5e1",
            "400": "#94a3b8",
            "500": "#64748b",
            "600": "#475569",
            "700": "#334155",
            "800": "#1e293b",
            "900": "#0f172a",
            "950": "#020617",
            "DEFAULT": "#020617"
          },
          "foreground": {
            "50": "#111827",
            "100": "#1f2937",
            "200": "#374151",
            "300": "#4b5563",
            "400": "#6b7280",
            "500": "#9ca3af",
            "600": "#d1d5db",
            "700": "#e5e7eb",
            "800": "#f3f4f6",
            "900": "#f9fafb",
            "DEFAULT": "white"
          }
        },
        "spacing": {
          "128": "32rem",
          "144": "36rem"
        },
        "borderRadius": {
          "4xl": "2rem"
        }
      },
      "screens": {
        "lg": "976px",
        "md": "768px",
        "sm": "480px",
        "xl": "1440px"
      },
      "fontFamily": {
        "sans": [
          "Graphik",
          "sans-serif"
        ],
        "serif": [
          "Merriweather",
          "serif"
        ]
      }
    },
    "darkMode": [
      "selector",
      "[data-mode=\"dark\"]"
    ]
  }
         },
        'grapesjs-touch': {},
      },
      canvasCss: `
                  .gjs-selected {
                    outline: 3px solid #d8b4fe !important;
                  }
                  .gjs-panel { display: none; }
            `,
    });
    

    // <img src="https://play.tailwindcss.com/img/grid.svg" alt="background" class="absolute z-0 top-1/2 left-1/2 max-w-none -translate-x-1/2 -translate-y-1/2" width="1308" />


    const component = `
  <div class="mx-auto container px-4 py-8 sm:px-6 sm:py-12 lg:px-8 lg:py-16 dark:text-foreground-400 dark:bg-background-900">
  <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 sm:items-stretch md:grid-cols-3 md:gap-8 dark:bg-background-900 w-full">
    <div class="divide-y divide-foreground-400 dark:divide-foreground-500 rounded-2xl bg-background hover:bg-background-900 border border-foreground-300 shadow-sm dark:border-foreground-500 dark:hover:bg-background-800 ">
      <div class="p-6 sm:px-8">
        <!-- Replace STARTER with the appropriate plan name -->
        <h2 class="text-lg font-medium text-foreground-900 dark:text-foreground-200">
          STARTER
          <span class="sr-only">Plan</span>
        </h2>
        <!-- Replace DESCRIPTION with the appropriate description for the plan -->
        <p class="mt-2 text-foreground-700 dark:text-foreground-400">Short description of the plan.</p>
        <!-- Replace $20 with the appropriate price -->
        <p class="mt-2 sm:mt-4">
          <strong class="text-3xl font-bold text-foreground-900 sm:text-4xl dark:text-foreground-100"> $20 </strong>
          <span class="text-sm font-medium text-foreground-700 dark:text-foreground-300">/month</span>
        </p>
        <!-- Replace Get Started with appropriate text for the call to action -->
        <a class="mt-4 block rounded border border-foreground-300 cursor-pointer font-bold bg-primary px-12 py-3 text-primary-foreground hover:text-primary-foreground-600 text-center text-sm font-medium  hover:bg-primary/90 hover:text-foreground font-semibold focus:outline-none focus:ring active:text-foreground sm:mt-6" href="#">
          Get Started
        </a>
      </div>
      <div class="p-6 sm:px-8">
        <p class="text-lg font-medium text-foreground-900 sm:text-xl dark:text-foreground-400">What's included:</p>
        <ul class="mt-2 space-y-2 sm:mt-4">
          <!-- List the features of the plan -->
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-primary-700 dark:text-primary-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> 10 users </span>
          </li>
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-primary-700 dark:text-primary-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> 2GB of storage </span>
          </li>
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-primary-700 dark:text-primary-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> Email support </span>
          </li>
          <!-- Indicate features not included with a different color icon -->
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-red-700 dark:text-rose-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> Help center access </span>
          </li>
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-red-700 dark:text-rose-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> Phone support </span>
          </li>
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-red-700 dark:text-rose-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> Community access </span>
          </li>
        </ul>
      </div>
    </div>
    <div class="divide-y divide-foreground-400 dark:divide-foreground-500 rounded-2xl border border-foreground-300 bg-background hover:bg-background-900 shadow-sm dark:border-foreground-500 dark:hover:bg-background-800 hover:bg-background-100">
      <div class="p-6 sm:px-8">
        <!-- Replace PRO with the appropriate plan name -->
        <h2 class="text-lg font-medium text-foreground-900 dark:text-foreground-200">
          PRO
          <span class="sr-only">Plan</span>
        </h2>
        <!-- Replace DESCRIPTION with the appropriate description for the plan -->
        <p class="mt-2 text-foreground-700 dark:text-foreground-400">Short description of the plan.</p>
        <!-- Replace $120 with the appropriate price -->
        <p class="mt-2 sm:mt-4">
          <strong class="text-3xl font-bold text-foreground-900 sm:text-4xl dark:text-foreground-100"> $120 </strong>
          <span class="text-sm font-medium text-foreground-700 dark:text-foreground-300">/month</span>
        </p>
        <!-- Replace Get Started with appropriate text for the call to action -->
        <a class="mt-4 block rounded border border-foreground-300 cursor-pointer font-bold bg-primary px-12 py-3 text-primary-foreground hover:text-primary-foreground-600 text-center text-sm font-medium  hover:bg-primary/90 hover:text-foreground font-semibold focus:outline-none focus:ring active:text-foreground sm:mt-6" href="#">
          Get Started
        </a>
      </div>
      <div class="p-6 sm:px-8">
        <p class="text-lg font-medium text-foreground-900 sm:text-xl dark:text-foreground-400">What's included:</p>
        <ul class="mt-2 space-y-2 sm:mt-4">
          <!-- List the features of the plan -->
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-primary-700 dark:text-primary-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> 10 users </span>
          </li>
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-primary-700 dark:text-primary-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> 2GB of storage </span>
          </li>
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-primary-700 dark:text-primary-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> Email support </span>
          </li>
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-primary-700 dark:text-primary-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> Help center access </span>
          </li>
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-primary-700 dark:text-primary-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> Phone support </span>
          </li>
          <!-- Indicate features not included with a different color icon -->
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-red-700 dark:text-rose-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> Community access </span>
          </li>
        </ul>
      </div>
    </div>
    <div class="divide-y divide-foreground-400 dark:divide-foreground-500 rounded-2xl bg-background hover:bg-background-900 border border-foreground-300 shadow-sm dark:border-foreground-500 dark:hover:bg-background-800 hover:bg-background-100">
      <div class="p-6 sm:px-8">
        <!-- Replace ENTERPRISE with the appropriate plan name -->
        <h2 class="text-lg font-medium text-foreground-900 dark:text-foreground-200">
          ENTERPRISE
          <span class="sr-only">Plan</span>
        </h2>
        <!-- Replace DESCRIPTION with the appropriate description for the plan -->
        <p class="mt-2 text-foreground-700 dark:text-foreground-400">Short description of the plan.</p>
        <!-- Replace Contact us with the appropriate call to action -->
        <p class="mt-2 sm:mt-4">
          <strong class="text-3xl font-bold text-foreground-900 sm:text-4xl dark:text-foreground-100"> Contact us </strong>
        </p>
        <!-- Replace Get Started with appropriate text for the call to action -->
        <a class="mt-4 block rounded border border-foreground-300 cursor-pointer font-bold bg-primary px-12 py-3 text-primary-foreground hover:text-primary-foreground-600 text-center text-sm font-medium  hover:bg-primary/90 hover:text-foreground font-semibold focus:outline-none focus:ring active:text-foreground sm:mt-6" href="#">
          Get Started
        </a>
      </div>
      <div class="p-6 sm:px-8">
        <p class="text-lg font-medium text-foreground-900 sm:text-xl dark:text-foreground-400">What's included:</p>
        <ul class="mt-2 space-y-2 sm:mt-4">
          <!-- List the features of the plan -->
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-primary-700 dark:text-primary-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> 10 users </span>
          </li>
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-primary-700 dark:text-primary-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> 2GB of storage </span>
          </li>
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-primary-700 dark:text-primary-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> Email support </span>
          </li>
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-primary-700 dark:text-primary-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> Help center access </span>
          </li>
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-primary-700 dark:text-primary-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> Phone support </span>
          </li>
          <!-- Indicate features not included with a different color icon -->
          <li class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-red-700 dark:text-rose-400">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
            <span class="text-foreground-700 dark:text-foreground-300"> Community access </span>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>`
    const test = `<div id="test">${component}</div>`
    function stringToHtml(htmlString) {
      const parser = new DOMParser();
      const doc = parser.parseFromString(htmlString, 'text/html');
      return doc.body.firstChild;
    }

    function getTextNodes(element) {
      const textNodes = [];
      const clone = element.cloneNode(true);
      const walker = document.createTreeWalker(
        clone,
        NodeFilter.SHOW_TEXT, // Show only text nodes
        null,
        false
      );
      let node;
      const nodesToReplace = [];
      while (node = walker.nextNode()) {
        if (node.textContent.trim() !== '') {
          const wrapper = document.createElement('div');
          const htmlToAdd = `
                        <div role="status" class="animate-pulse w-full ">
                            <div class="h-3 bg-background-400 rounded-full dark:bg-background-600 w-full mb-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>
                        </div>
                    `;
          wrapper.innerHTML = htmlToAdd;
          nodesToReplace.push({ node, replacement: stringToHtml(htmlToAdd) });
        }
      }

      // Perform replacements after traversing all text nodes
      nodesToReplace.forEach(({ node, replacement }) => {
        node.parentNode.replaceChild(replacement, node);
      });
      const htmlString = clone.outerHTML;
      return htmlString;
    }

    editor.addComponents(test);
    let genComponent = getTextNodes(stringToHtml(test));
    // console.log("new component:", genComponent);


    setTimeout(() => {
      // const component = editor.DomComponents.getById("test");
      // component?.replaceWith(genComponent);
    }, 1000)

    editor.Panels.addButton('options', {
      id: 'update-theme',
      className: 'fa fa-adjust',
      command: 'open-update-theme',
      attributes: {
        title: 'New Page',
        'data-tooltip-pos': 'bottom',
      },
    });

    editor.Panels.addButton('options', {
      id: 'update-theme-2',
      className: 'fa fa-adjust',
      command: 'run-theme',
      attributes: {
        title: 'New Theme',
        'data-tooltip-pos': 'bottom',
      },
    });
  </script>
</body>

</html>